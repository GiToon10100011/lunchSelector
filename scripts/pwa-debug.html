<!DOCTYPE html>
<html>
<head>
    <title>PWA Debug Tool</title>
</head>
<body>
    <h1>PWA ì„¤ì¹˜ ì¡°ê±´ ì²´í¬</h1>
    <div id="results"></div>

    <script>
        function checkPWA() {
            const results = document.getElementById('results');
            let html = '<h2>PWA ì¡°ê±´ ì²´í¬ ê²°ê³¼:</h2>';

            // 1. HTTPS ì²´í¬
            html += `<p>ğŸ”’ HTTPS: ${location.protocol === 'https:' ? 'âœ…' : 'âŒ'}</p>`;

            // 2. Service Worker ì²´í¬
            html += `<p>âš™ï¸ Service Worker ì§€ì›: ${'serviceWorker' in navigator ? 'âœ…' : 'âŒ'}</p>`;

            // 3. Manifest ì²´í¬
            const manifestLink = document.querySelector('link[rel="manifest"]');
            html += `<p>ğŸ“„ Manifest ë§í¬: ${manifestLink ? 'âœ…' : 'âŒ'}</p>`;

            // 4. beforeinstallprompt ì´ë²¤íŠ¸ ì²´í¬
            let installPromptAvailable = false;
            window.addEventListener('beforeinstallprompt', (e) => {
                installPromptAvailable = true;
                html += `<p>ğŸ“± ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸: âœ… ì‚¬ìš© ê°€ëŠ¥</p>`;
                results.innerHTML = html;
            });

            // 5. í”Œë«í¼ ì²´í¬
            const isAndroid = /Android/i.test(navigator.userAgent);
            const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
            const isSafari = /Safari/i.test(navigator.userAgent) && !/Chrome/i.test(navigator.userAgent);

            html += `<p>ğŸ“± í”Œë«í¼: ${isAndroid ? 'Android' : isIOS ? 'iOS' : 'Desktop'}</p>`;
            html += `<p>ğŸŒ ë¸Œë¼ìš°ì €: ${isSafari ? 'Safari' : 'Chrome/Other'}</p>`;

            if (isIOS && !isSafari) {
                html += `<p>âš ï¸ iOSì—ì„œëŠ” Safarië§Œ PWA ì„¤ì¹˜ ê°€ëŠ¥</p>`;
            }

            // ì´ˆê¸° ê²°ê³¼ í‘œì‹œ
            setTimeout(() => {
                if (!installPromptAvailable) {
                    html += `<p>ğŸ“± ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸: âŒ ì‚¬ìš© ë¶ˆê°€</p>`;
                    if (isAndroid) {
                        html += `<p>ğŸ’¡ Android Chromeì—ì„œ ì£¼ì†Œì°½ ì˜† ì•„ì´ì½˜ í™•ì¸í•˜ì„¸ìš”</p>`;
                    }
                }
                results.innerHTML = html;
            }, 1000);

            results.innerHTML = html;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²´í¬
        window.addEventListener('load', checkPWA);
    </script>
</body>
</html>